FROM archlinux

ARG USER
ENV USER ${USER:-docker}

RUN groupadd -g 60310 docker
RUN useradd -g 60310 -l -m -u 61000 $USER
RUN pacman -Syu --noconfirm
RUN pacman -S --noconfirm sudo zsh git
RUN echo "$USER ALL=NOPASSWD: ALL" >> /etc/sudoers
RUN echo 'Set disable_coredump false' >> /etc/sudo.conf

USER $USER

WORKDIR /home/$USER
CMD ["/bin/zsh", "--login"]
